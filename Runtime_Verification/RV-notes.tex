\documentclass{report}

\usepackage{amsmath}
\usepackage{amsfonts}

\begin{document}

\section{Basics}

\[
\begin{array}{rcl}
	                            \Sigma & : & \text{events}                                  \\
	                          \Sigma^* & : & \text{finite traces}                           \\
	                          \Sigma^w & : & \text{infinite traces}                         \\
	              P \subseteq \Sigma^* & : & \text{P is finite trace property}              \\
	              P \subseteq \Sigma^w & : & \text{P is infinite trace property}            \\
	P \subseteq \Sigma^* \cup \Sigma^w & : & \text{P is finite and infinite trace property}
\end{array}
\]
\[
\begin{array}{l}
	|\mathbb{N}| = \aleph_0               \\
	|\mathbb{R}| = \aleph_1 = \mathcal{C}
\end{array}
\]

$A$  is a set. $|A| = \alpha$ and
$|\wp(A)| = 2^\alpha$

\medskip

Continuum Hypothesis:
$$\not\exists B. \alpha < |B| < 2^\alpha$$

\[
\begin{array}{l}
|A| \leq |B| \iff \exists \phi : A \to B \text{ injective}\\
|A| = |B| \iff \exists \phi : A \to B \text{ bijective}\\
\end{array}
\]

Cantor Schroder Bernstein theorem:
\[
|A| \leq |B| \land |B| \leq |A| \to |A| = |B|\\
\]

Let $|A|= \alpha$ and $|B| = \beta$,
$\alpha \leq \beta$ both are infinite
\[
\begin{array}{l}
|A \cup B| = \alpha + \beta = \beta\\
|A \times B| = \alpha\beta = \beta\\
\end{array}
\]

\section{Finite Traces}

Prefixes of a word
\[
\begin{array}{l}
prefixes : \Sigma^* \to \wp(\Sigma^*)\\
prefixes(w) = \{w \mid \exists w' . w'w''=w\}\\
\end{array}
\]
Prefixes of a set of words
$$
prefixes : \wp(\Sigma^*) \to \wp(\Sigma^*)\\
$$
\hspace{10pt}
$prefixes$ is a Closure Operator
$$
\begin{array}{l}
extensive : A \subseteq A^o\\
monotone: A \subseteq B \to A^o \subseteq B^o\\
idempotent: A^{oo} = A^o\\
\end{array}
$$

\newpage

\begin{itemize}
\item $Safety^* = \{P \in \wp(\Sigma^*)\mid P = prefixes(P)\}$\\
E.g. $\ \emptyset, \Sigma^*$

\item $PersistentSafety^* = \{P \in Safety^* \mid \forall w \in P.\ \exists a\in\Sigma.\ wa\in P\}$\\
E.g. When $|\Sigma| = 1$, we have $|Safety^*| = \aleph_0$ and $|PSafety^*| = 2$ since $PSafety^* = \{\emptyset, \Sigma^*\}$

  \item $Safety^*$  closed under: $\cup \cap$
  \item $PSafety^*$ closed under: $\cup \not\cap$\\
  Counter Example for $\cap$:
  $\{0^n \mid n \in \mathbb{N}\} \cap (\{\epsilon\}\cup\{01^n \mid n \in \mathbb{N}\}) = \{\epsilon, 0\}$
  
\end{itemize}

\noindent
\textbf{Theorem:}

If $P \in Safety^*$ then $P^0 \in PSafety$ is the largest $P' \in PSafety^*$ s.t. $P' \subseteq P$
where
$$
P^0 = \bigcup_{\substack{P' \in PSafety \\ P'\subseteq P}} P'
$$

E.g. If $P \in Safety^*$ is finite then $P^0 = \emptyset$


E.g.
$$
\begin{array}{l}
P = \{0^n \mid n \in \mathbb{N}\} \cap \{0^n1 \mid n \in \mathbb{N}\} \\
P^0 = \{0^n \mid n \in \mathbb{N}\}
\end{array}
$$

\noindent
What if $P$ infinite?
$$
\begin{array}{l}
P \in Safety^*, \text{let } P^- = \{w \in P \mid \exists a\in \Sigma.\ wa \in P\}\\
P_0 = P, P_1 = P_0^-, P_2=P_1^-,...\\
P_0 \supseteq P_1 \supseteq P_2 \supseteq ... \\
\end{array}
$$



$P^0 \stackrel{?}{=} \bigcap_{i\geq 0} P_i \qquad
\begin{cases}
yes, if\ |\Sigma| = finite\\
no, if\ |\Sigma| \geq \aleph_0\\
\end{cases}
$

\noindent
\textbf{Proof:} for finite case
\begin{enumerate}

\item $\bigcap_{i\geq 0} P_i$ is persistent\\
Suppose not, then $\exists w \in \bigcap_{i\geq 0} P_i.\forall a \in \Sigma. wa \notin \bigcap_{i\geq 0} P_i$\\
which indicates $\exists i_a. wa \notin P_{i_a}$

Let $i = max\{i_a \mid a \in \Sigma \}$, $P_i \subseteq P_{i_a}$ for all $a \in \Sigma$\\
Therefore, $\forall a \in \Sigma. wa \notin P_i$\\
so $w \notin P_i^- = P_{i+1}$ which contradicts to $w \in \bigcap_{i\geq 0} P_i$.

\item $\bigcap_{i\geq 0} P_i$ is the largest persistent
Let $P' \subseteq P$ is in $PSafety^*$ induction on i that $P' \subseteq P_i$\\
Base case: $P' \subseteq P_0 = P$\\
Induction: If $P' \subseteq P_i$, then $P_{i+1} = P_i^- = \{w \mid \exists a. wa \in P_i\}$

\end{enumerate}

\newpage

\noindent
\textbf{Theorem:} $|PSafety^*| = |Safety^*| = \mathcal{C}$
when $2 \leq |\Sigma| \leq \mathcal{C}$

\noindent
Proof:

Obviously $|PSafety^*| \leq |Safety^*| \leq \mathcal{C}$. \\
To prove other way around. Find injective $\varphi :　(0,1) \to PSafety^*$

Let $\bar{0}, \bar{1} \in \Sigma$. Then we can represent any real number $r$ in binary form.
Then we choose $\varphi(r)$ as the set of all numbers less than $r$ in binary form.
That is,
$$
\varphi(r) = \{\bar{\alpha} \mid 0.\alpha < r \text{ where } \alpha \in \{0,1\}^*1\}
$$
$\varphi(r)$ is persistent because $0.\alpha1$ is also less than $r$ for any $0.\alpha < r$;\\
hence $0.\alpha1 \in \varphi(r).$\\
$\varphi$ is injective because for any $r_1 \neq r_2 \in (0,1)$,
there must be $r'$ s.t. $r_1 <　r' < r_2$.
Therefore, $r' \notin \varphi(r_1) \land r' \in \varphi(r_2)$
which implies $\varphi(r_1) \neq \varphi(r_2)$.

\end{document}
